<p align="center"><strong>ç®€ä½“ä¸­æ–‡</strong> | <a href="./README_en.md">English</a></p>

<h1 align="center">NapGram</h1>

<p align="center">åŸºäº NapCat å’Œ mtcute çš„ç°ä»£åŒ– QQ-Telegram æ¶ˆæ¯æ¡¥æ¥å·¥å…·</p>

<p align="center">
  <a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT" /></a>
  <a href="https://nodejs.org/"><img src="https://img.shields.io/badge/Node.js-25-green.svg" alt="Node.js" /></a>
  <a href="https://www.typescriptlang.org/"><img src="https://img.shields.io/badge/TypeScript-5.0+-blue.svg" alt="TypeScript" /></a>
  <a href="https://github.com/NapGram/NapGram/actions/workflows/docker-release.yml"><img src="https://github.com/NapGram/NapGram/actions/workflows/docker-release.yml/badge.svg?event=release&label=Release%20Build" alt="Release Build" /></a>
  <a href="https://codecov.io/gh/NapGram/NapGram"><img src="https://codecov.io/gh/NapGram/NapGram/branch/dev/graph/badge.svg" alt="Codecov" /></a>
  <a href="https://github.com/NapGram/NapGram/releases"><img src="https://img.shields.io/github/v/release/NapGram/NapGram?display_name=tag&include_prereleases&logo=git&label=Latest" alt="Release" /></a>
  <a href="https://github.com/NapGram/NapGram/pkgs/container/napgram"><img src="https://img.shields.io/badge/ghcr.io%2FNapGram%2Fnapgram-blue?logo=docker&label=Container" alt="GHCR Image" /></a>
  <a href="https://github.com/NapGram/NapGram/commits/main"><img src="https://img.shields.io/github/last-commit/NapGram/NapGram/main?logo=github&label=Last%20Commit" alt="Last Commit" /></a>
  <a href="https://github.com/NapGram/NapGram/pulse"><img src="https://img.shields.io/github/commit-activity/m/NapGram/NapGram?logo=github&label=Commit%20Activity" alt="Commit Activity" /></a>
  <a href="https://github.com/NapGram/NapGram/issues"><img src="https://img.shields.io/github/issues/NapGram/NapGram?logo=github" alt="Issues" /></a>
  <a href="https://github.com/NapGram/NapGram/pulls"><img src="https://img.shields.io/github/issues-pr/NapGram/NapGram?logo=github&label=Pull%20Requests" alt="PRs" /></a>
  <a href="https://github.com/NapGram/NapGram/stargazers"><img src="https://img.shields.io/github/stars/NapGram/NapGram?style=social" alt="Stars" /></a>
  <a href="https://github.com/NapGram/NapGram/network/members"><img src="https://img.shields.io/github/forks/NapGram/NapGram?style=social" alt="Forks" /></a>
</p>

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸš€ ç°ä»£åŒ–æ¶æ„
- **ç»Ÿä¸€æŠ½è±¡å±‚**ï¼šåŸºäº `IQQClient` æ¥å£çš„æ ‡å‡†åŒ–å®ç°ï¼Œè§£è€¦åº•å±‚åè®®
- **æ¨¡å—åŒ–è®¾è®¡**ï¼šFeature é©±åŠ¨çš„æ¶æ„ï¼ˆForward, Recall, Media, Commandsï¼‰
- **é«˜æ€§èƒ½æ ¸å¿ƒ**ï¼š
  - âš¡ æ¶ˆæ¯å¤„ç†é€Ÿåº¦æå‡ 50%
  - ğŸ“‰ å†…å­˜å ç”¨é™ä½ 15%
  - ğŸ”„ LRU å¤šçº§ç¼“å­˜ç³»ç»Ÿ

### ğŸ’¬ æ¶ˆæ¯èƒ½åŠ›
- **å…¨ç±»å‹æ”¯æŒ**ï¼š
  - âœ… æ–‡æœ¬ã€å›¾ç‰‡ï¼ˆå«é—ªç…§ï¼‰ã€è§†é¢‘ã€éŸ³é¢‘
  - âœ… æ–‡ä»¶ã€è´´çº¸ã€@æåŠã€è¡¨æƒ…
  - âœ… åˆå¹¶è½¬å‘æ¶ˆæ¯ã€å¼•ç”¨å›å¤
  - âœ… å•†åŸè¡¨æƒ… (mface)ã€æ·éª°å­/çŒœæ‹³
  - âœ… Markdown/JSON å¡ç‰‡æ¶ˆæ¯
- **åª’ä½“å¢å¼º**ï¼š
  - ğŸ–¼ï¸ æ™ºèƒ½å›¾ç‰‡åˆ†ç‰‡å‘é€ï¼ˆè§£å†³åˆå¹¶è½¬å‘æ˜¾ç¤ºé—®é¢˜ï¼‰
  - ğŸ¥ GIF è‡ªåŠ¨ä¼˜åŒ–æ’­æ”¾
  - ğŸµ è¯­éŸ³è‡ªåŠ¨è½¬ç  (Silk/Ogg)
  - ğŸ“‚ è·¨å®¹å™¨å¤§æ–‡ä»¶æµå¼ä¼ è¾“

### ğŸ›¡ï¸ ç¨³å®šæ€§ä¸ç›‘æ§
- **åŒå‘æ’¤å›åŒæ­¥**ï¼šQQ ä¸ Telegram æ¶ˆæ¯æ’¤å›äº’é€š
- **æ™ºèƒ½é‡è¿**ï¼šWebSocket æ–­çº¿è‡ªåŠ¨é‡è¿æœºåˆ¶
- **å¥åº·ç›‘æ§**ï¼š
  - å®æ—¶å»¶è¿Ÿç»Ÿè®¡ (p50/p95/p99)
  - é”™è¯¯ç‡è¿½è¸ªä¸è‡ªåŠ¨æ¢å¤
  - æ¶ˆæ¯é˜Ÿåˆ—ä¼˜å…ˆçº§ç®¡ç†
- **Web æ§åˆ¶å°**ï¼š
  - âœ… Docker é•œåƒå†…ç½®å‰ç«¯ï¼ˆé»˜è®¤ç«¯å£ `8080`ï¼Œè®¿é—® `http://<host>:8080/`ï¼‰
  - ğŸ“Š ç³»ç»ŸçŠ¶æ€ä¸æ€§èƒ½æŒ‡æ ‡ï¼ˆç»Ÿè®¡æ¦‚è§ˆã€è¶‹åŠ¿ã€å»¶è¿Ÿï¼‰
  - âš™ï¸ å¯è§†åŒ–ç®¡ç†ï¼ˆå®ä¾‹/ç»‘å®š/é…ç½®ã€æ—¥å¿—ä¸æ¶ˆæ¯æŸ¥è¯¢ï¼‰

## ğŸ—ï¸ æŠ€æœ¯æ ˆåˆ—è¡¨

| ç»„ä»¶ | æŠ€æœ¯æ–¹æ¡ˆ | è¯´æ˜ |
|-----------|-----------|-----------|
| **QQ é€‚é…** | [NapCat](https://github.com/NapNeko/NapCatQQ) | åŸºäº WebSocket çš„ç°ä»£åŒ–åè®®å®ç° |
| **TG é€‚é…** | [mtcute](https://github.com/mtcute/mtcute) | åŸç”Ÿ MTProto å®ç°ï¼Œæ— éœ€ Bot API ä¸­è½¬ |
| **æ ¸å¿ƒè¯­è¨€** | TypeScript 5.0+ | ä¸¥æ ¼æ¨¡å¼ï¼Œå…¨é“¾è·¯ç±»å‹å®‰å…¨ |
| **å‰ç«¯æ¡†æ¶** | React 19 + Vite | Tailwind CSS 4, Shadcn UI, Recharts |
| **è¿è¡Œæ—¶** | Node.js 25 (ESM) | ç°ä»£åŒ–æ¨¡å—ç³»ç»Ÿ |
| **æ•°æ®æŒä¹…åŒ–** | PostgreSQL + Prisma 7 | å¼ºç±»å‹ ORMï¼Œæ”¯æŒè‡ªåŠ¨è¿ç§» |
| **æµ‹è¯•æ¡†æ¶** | Vitest | å•å…ƒæµ‹è¯•è¦†ç›–ç‡ >80% |

## ğŸš€ éƒ¨ç½²æŒ‡å—

### å‰ç½®è¦æ±‚
- **NapCat (å¿…é€‰)**ï¼šéœ€è‡ªè¡Œéƒ¨ç½² [NapCatQQ](https://napneko.github.io/) å®ä¾‹ï¼Œå¹¶å¼€å¯ WebSocket æœåŠ¡
- **æ•°æ®åº“**ï¼šPostgreSQL 14+
- **ç½‘ç»œ**ï¼šNapGram å®¹å™¨éœ€èƒ½è®¿é—® NapCat æœåŠ¡ç«¯å£

### é•œåƒæ ‡ç­¾çº¦å®š

- ç¨³å®šç‰ˆï¼ˆRelease æ„å»ºï¼‰ï¼š`latest` + `vX.Y.Z`
- å¼€å‘ç‰ˆï¼ˆæ¯æ—¥æ„å»ºï¼‰ï¼š`dev-latest` + `dev-YYYYMMDD`

### Docker Compose éƒ¨ç½² (æ¨è)

1. **è·å–é¡¹ç›®**
   ```bash
   git clone https://github.com/NapGram/NapGram.git
   cd NapGram
   ```

2. **å¤åˆ¶å¹¶é…ç½® Compose**
   ```bash
   cp compose.example.yaml docker-compose.yml
   # ç¼–è¾‘ docker-compose.yml çš„ environmentï¼ˆå¿…å¡«é¡¹ï¼šTG_API_ID / TG_API_HASH / TG_BOT_TOKENï¼‰
   ```

3. **å¯åŠ¨æœåŠ¡**
   ```bash
   docker-compose pull
   docker-compose up -d
   ```

## ğŸ“š æ–‡æ¡£

- ğŸ“– **é¡¹ç›®æ–‡æ¡£(Wiki)**:https://github.com/NapGram/NapGram/wiki
- ğŸ“ **æ›´æ–°æ—¥å¿—**:https://github.com/NapGram/NapGram/wiki/Changelog
- ğŸ§© **æ’ä»¶ç³»ç»Ÿ**:https://github.com/NapGram/NapGram/wiki/Operations-Plugins
- ğŸ”Œ **æ’ä»¶å¼€å‘æŒ‡å—**:https://github.com/NapGram/NapGram/wiki/Guide-Plugin-Development
- ğŸ“¦ **æ’ä»¶å¸‚åœº**:https://github.com/NapGram/napgram-marketplace
- ğŸ¨ **æ’ä»¶æ¨¡æ¿**:https://github.com/NapGram/napgram-plugin-template
- â¬†ï¸ **å‡çº§ä¸è¿ç§»(FAQ)**:https://github.com/NapGram/NapGram/wiki/Operations-Upgrade
- ğŸ’¬ **å¸¸ç”¨å‘½ä»¤**:https://github.com/NapGram/NapGram/wiki/Guide-Commands
- ğŸ”— **ç›¸å…³é¡¹ç›®**:NapCat SDK(TypeScript)[NapLink](https://github.com/NapGram/NapLink)

## ğŸ“… æ›´æ–°æ—¥å¿—

ğŸ“ **[æŸ¥çœ‹ç‰ˆæœ¬æ›´æ–°æ—¥å¿—](https://github.com/NapGram/NapGram/wiki/Changelog)**

## ğŸ“– å¼€å‘è€…æ–‡æ¡£

### ç›®å½•ç»“æ„
```bash
.
â”œâ”€â”€ main/                 # åç«¯æ ¸å¿ƒï¼ˆFastify + mtcute + NapCatï¼‰
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ domain/       # é¢†åŸŸæ¨¡å‹ã€è½¬æ¢å™¨ä¸ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ features/     # åŠŸèƒ½æ¨¡å—ï¼ˆForward/Media/Recall/Commandsï¼‰
â”‚   â”‚   â”œâ”€â”€ infrastructure/# åè®®é€‚é…ä¸å¤–éƒ¨ä¾èµ–ï¼ˆQQ/TG å®¢æˆ·ç«¯ç­‰ï¼‰
â”‚   â”‚   â”œâ”€â”€ interfaces/   # Web API + Web æ§åˆ¶å°æ‰˜ç®¡ï¼ˆFastifyï¼‰
â”‚   â”‚   â””â”€â”€ shared/       # é€šç”¨å·¥å…·ã€æ—¥å¿—ã€æœåŠ¡
â”œâ”€â”€ packages/             # Monorepo packages
â”‚   â””â”€â”€ database/         # Drizzle schema & migrations
â”œâ”€â”€ web/                  # Web æ§åˆ¶å°é™æ€èµ„æºï¼ˆDocker é•œåƒå†…ç½® distï¼‰
â”‚   â””â”€â”€ dist/             # å‰ç«¯æ„å»ºäº§ç‰©ï¼ˆæä¾› SPAï¼‰
â”œâ”€â”€ Dockerfile            # å®¹å™¨æ„å»ºï¼ˆé»˜è®¤å¯ç”¨ Web æ§åˆ¶å°ï¼‰
â””â”€â”€ compose*.yaml         # Docker Compose ç¤ºä¾‹
```

### åˆ›å»ºæ–°åŠŸèƒ½
å¾—ç›Šäºæ¨¡å—åŒ–æ¶æ„ï¼Œæ·»åŠ æ–°åŠŸèƒ½éå¸¸ç®€å•ï¼š

```typescript
// 1. å®ç° Feature æ¥å£
class MyFeature {
    constructor(
        private instance: Instance,
        private tgBot: Telegram,
        private qqClient: IQQClient,
    ) {
        this.setupListeners();
    }
    
    private setupListeners() {
        this.qqClient.on('message', this.handleMessage);
    }
}

// 2. æ³¨å†Œåˆ° FeatureManager
featureManager.register(new MyFeature(...));
```

## ğŸ¯ å·²å¯ç”¨æ’ä»¶

- **ForwardFeature**: åŒ…å«å»é‡é€»è¾‘å’Œé«˜çº§è½¬å‘ç­–ç•¥
- **RecallFeature**: åŒå‘æ’¤å›åŒæ­¥
- **MediaFeature**: ç»Ÿä¸€åª’ä½“ä¸‹è½½ä¸è½¬ç 
- **CommandsFeature**: ä¸°å¯Œçš„ç®¡ç†å‘½ä»¤ç³»ç»Ÿï¼ˆå‘é€ `/help` æŸ¥çœ‹å®Œæ•´åˆ—è¡¨ï¼‰

### å¸¸ç”¨å‘½ä»¤

å¸¸ç”¨å‘½ä»¤ä¸å®Œæ•´è¯´æ˜å·²è¿ç§»åˆ° Wikiï¼šhttps://github.com/NapGram/NapGram/wiki/Guide-Commands

## ğŸ¤ è´¡çŒ®ä¸è‡´è°¢

- æ ¸å¿ƒåè®®åº“æ„Ÿè°¢ [NapCat](https://github.com/NapNeko/NapCatQQ) å’Œ [mtcute](https://github.com/mtcute/mtcute) çš„å¼€æºè´¡çŒ®
- æ„Ÿè°¢ [åŸå§‹ q2tg é¡¹ç›®](https://github.com/Clansty/Q2TG) å’Œ[node-napcat-ts](https://github.com/HkTeamX/node-napcat-ts)ä¸ºæœ¬é¡¹ç›®æä¾›äº†é‡è¦çš„å‚è€ƒå’Œçµæ„Ÿ


## âš ï¸ å…è´£å£°æ˜

æœ¬é¡¹ç›®ä»…ä¾›æ•™è‚²å’Œä¸ªäººä½¿ç”¨ã€‚è¯·éµå®ˆ QQ å’Œ Telegram çš„æœåŠ¡æ¡æ¬¾ã€‚

## ğŸ’¬ åŠ å…¥ç¤¾åŒº

- **Telegram ç¾¤ç»„**: [https://t.me/+BiKryJzcQRYzZjA1](https://t.me/+BiKryJzcQRYzZjA1)
- **Telegram é¢‘é“**: [https://t.me/napgram_offical](https://t.me/napgram_offical)
- **QQ ç¾¤**: 1036505332

## â­ Star è¶‹åŠ¿

[![Star History Chart](https://starchart.cc/NapGram/NapGram.svg)](https://starchart.cc/NapGram/NapGram)

---

## ğŸ“§ è”ç³»æ–¹å¼

- GitHub Issues: [æŠ¥å‘Šé—®é¢˜](https://github.com/NapGram/NapGram/issues)

---
